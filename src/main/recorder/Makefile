# Makefile for Friday Swift Recorder
SWIFT_FILES = main.swift
TARGET = Recorder
BUILD_DIR = .

# Compiler flags for ScreenCaptureKit
SWIFT_FLAGS = -framework AVFoundation -framework ScreenCaptureKit -framework CoreGraphics

# Default target
all: $(TARGET)

# Build the recorder
$(TARGET): $(SWIFT_FILES)
	@echo "ðŸ”¨ Building Swift recorder with ScreenCaptureKit..."
	swiftc $(SWIFT_FLAGS) -o $(BUILD_DIR)/$(TARGET) $(SWIFT_FILES)
	@echo "âœ… Build complete: $(BUILD_DIR)/$(TARGET)"

# Clean build artifacts
clean:
	@echo "ðŸ§¹ Cleaning build artifacts..."
	rm -f $(BUILD_DIR)/$(TARGET)
	rm -f *.o
	@echo "âœ… Clean complete"

# Test the recorder
test: $(TARGET)
	@echo "ðŸ§ª Testing recorder..."
	../../../$(TARGET) --test
	@echo "âœ… Test complete"

# Install dependencies (if needed)
install: $(TARGET)
	@echo "ðŸ“¦ Installing recorder to project root..."
	cp $(BUILD_DIR)/$(TARGET) ../../../$(TARGET)
	@echo "âœ… Installation complete"

.PHONY: all clean test install 